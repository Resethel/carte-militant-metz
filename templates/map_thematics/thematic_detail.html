<!-- theme_detail.html -->
{% load static %} 

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ theme.name }} - Theme Detail - Cartographie Militante</title>
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    <link rel="stylesheet" href="{% static 'css/topbar.css' %}">
    <link rel="stylesheet" href="{% static 'css/footer.css' %}">
    <link rel="stylesheet" href="{% static 'css/card_list.css' %}">

</head>
<body class="page">

    <!-- Header Topbar -->
    {% include 'core/topbar.html' %}

    <!-- Main Content Section -->
    <main class="main">

        <!-- Hero part of the page -->
        <div class="hero">
            <div class="hero-content">
                <div class="hero-title">
                    <div class="hero-title-text">{{ thematic_name }}</div>
                </div>
            </div>
        </div>

        <!-- Main content of the page -->
        <div class="container">
            <!-- Description of the theme -->
            <section class="section" id="description">
                <div class="text-block">
                    {{ thematic_desc | safe }}
                </div>
            </section>

            <section class="section" id="map_list">
                <div class="section-title">
                    Cartes interactives sur cette thématique:
                </div>
                <div class="card-container">
                    <div class="card-row">
                        {% for map in maps %}
                            <div class="card-col">
                                <a href="{% url 'interactive_map_detail' map.id %}">
                                    <div class="card map-card">
                                        {% if map.thumbnail %}
                                            <img src="{{ map.thumbnail.url }}" alt="{{ map.name }}">
                                        {% else %}
                                            <img src="{% static 'images/map_placeholder.png' %}" alt="{{ map.name }}">
                                        {% endif %}
                                        <div class="map-card-content">
                                            <div class="map-card-metadata">
                                                {% for author in map.authors.all %}
                                                    <div class="map-card-metadata-author">
                                                        {% if author.picture %}
                                                            <img src="{{ author.picture.url }}" style="width: 24px; height: 24px" alt="">
                                                        {% else %}
                                                            <img src="{% static 'images/icons/author_placeholder.svg' %}" style="width: 24px; height: 24px" alt="">
                                                        {% endif %}
                                                        <a href="#{{ author.lastname }}-{{ author.firstname }}">
                                                            <span>{{ author.firstname }} {{ author.lastname }}</span>
                                                        </a>
                                                    </div>
                                                    {% if not forloop.last %}
                                                        <span class="map-card-metadata-divider">·</span>
                                                    {% endif %}
                                                {% endfor %}
                                                {%  if map.published_at %}
                                                    <span class="map-card-metadata-divider">·</span>
                                                    <div class="map-card-metadata-date">{{ map.published_at }}</div>
                                                {% endif %}
                                            </div>
                                            <h1 class="map-card-title">{{ map.title }}</h1>
                                        </div>
                                    </div>
                                </a>
                            </div>
                            {% if forloop.counter|divisibleby:3 and not forloop.last %}
                                </div>
                                <div class="card-row">
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
            </section>
        </div>

    </main>

    <!-- Footer -->
    {% include 'core/footer.html' %}

</body>
</html>
